{
  "configurations": [
    {
      "name": "Process Video (demo)",
      "source_types": "video,image",
      "docker_compose": "version: '2'\nservices:\n    ExcuberVideoInput:\n        labels:\n            io.rancher.scheduler.affinity:host_label: server_id=01\n            io.rancher.container.start_once: true\n        image: registry.git.excuber.intranet:5005/excuber/modulevideoinput\n        privileged: true\n        tty: true\n        stdin_open: true\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - RabbitMQ/rabbitmq:rabbitmq\n        entrypoint: /opt/excuber/run.sh\n        environment:\n            - INPUT=${INPUT}\n            - SOURCE_ID=${SOURCE_ID}\n            - FRAME_SKIP_RATE=5\n            - OUTPUT_AMQP=amqp://guest:guest@rabbitmq:5672/?exchange=excuber.processing.image&routing_key=%23.FaceDetection.%23\n        volumes:\n            - /var/excuber:/mnt/excuber",
      "rancher_compose": ".catalog:\n    name: \"Input-Archive\"\n    version: \"v1.0\"\n    description: \"Input-Archive\"\n    uuid: \"Input-Archive\"\n    minumum_rancher_version: \"v1.0\"\n    questions:\n        - variable: SOURCE_ID\n          description: \"Source ID\"\n          label: \"Source ID\"\n          required: true\n          default: \"source-\"\n          type: \"string\"\n        - variable: INPUT\n          description: \"Provide path to file input\"\n          label: \"Input path\"\n          required: true\n          default: \"\"\n          type: \"string\""
    },
    {
      "name": "Process Image (demo)",
      "source_types": "video,image",
      "docker_compose": "version: '2'\nservices:\n    ExcuberVideoInput:\n        labels:\n            io.rancher.scheduler.affinity:host_label: server_id=01\n            io.rancher.container.start_once: true\n        image: registry.git.excuber.intranet:5005/excuber/modulevideoinput\n        privileged: true\n        tty: true\n        stdin_open: true\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - RabbitMQ/rabbitmq:rabbitmq\n        entrypoint: /opt/excuber/run.sh\n        environment:\n            - INPUT=file://${INPUT}\n            - SOURCE_ID=${SOURCE_ID}\n            - FRAME_SKIP_RATE=1\n            - OUTPUT_AMQP=amqp://guest:guest@rabbitmq:5672/?exchange=excuber.processing.image&routing_key=%23.FaceDetection.%23\n        volumes:\n            - /var/excuber:/mnt/excuber",
      "rancher_compose": ".catalog:\n    name: \"Input-Archive\"\n    version: \"v1.0\"\n    description: \"Input-Archive\"\n    uuid: \"Input-Archive\"\n    minumum_rancher_version: \"v1.0\"\n    questions:\n        - variable: SOURCE_ID\n          description: \"Source ID\"\n          label: \"Source ID\"\n          required: true\n          default: \"source-\"\n          type: \"string\"\n        - variable: INPUT\n          description: \"Provide path to file input\"\n          label: \"Input path\"\n          required: true\n          default: \"\"\n          type: \"string\""
    },
    {
      "name": "Process Video or Image (integration)",
      "source_types": "video,image",
      "docker_compose": "version: '2'\nservices:\n    ExcuberVideoInput:\n        labels:\n            io.rancher.container.start_once: true\n        image: registry.git.excuber.intranet:5005/excuber/modulevideoinput\n        privileged: true\n        tty: true\n        stdin_open: true\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - RabbitMQ/rabbitmq:rabbitmq\n        entrypoint: /opt/excuber/run.sh\n        environment:\n            - INPUT=${INPUT}\n            - SOURCE_ID=${SOURCE_ID}\n            - FRAME_SKIP_RATE=5\n            - OUTPUT_AMQP=amqp://guest:guest@rabbitmq:5672/?exchange=excuber.processing.image&routing_key=%23.FaceDetection.%23\n        volumes:\n            - excuber:/mnt/excuber\nvolumes:\n    excuber:\n        driver: rancher-nfs\n        external: true",
      "rancher_compose": ".catalog:\n    name: \"Input-Archive\"\n    version: \"v1.0\"\n    description: \"Input-Archive\"\n    uuid: \"Input-Archive\"\n    minumum_rancher_version: \"v1.0\"\n    questions:\n        - variable: SOURCE_ID\n          description: \"Source ID\"\n          label: \"Source ID\"\n          required: true\n          default: \"source-\"\n          type: \"string\"\n        - variable: INPUT\n          description: \"Provide path to file input\"\n          label: \"Input path\"\n          required: true\n          default: \"\"\n          type: \"string\""
    },
    {
      "name": "Process live RTMP (demo)",
      "source_types": "camera",
      "docker_compose": "version: '2'\nservices:\n    ExcuberVideoInput:\n        image: registry.git.excuber.intranet:5005/excuber/modulevideoinput:latest\n        privileged: true\n        tty: true\n        stdin_open: true\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - RabbitMQ/rabbitmq:rabbitmq\n            - ReleaseExcuberCommon/ExcuberMediaServices:ExcuberMediaServices\n        entrypoint: /opt/excuber/run.sh\n        environment:\n            - INPUT=rtmp://ExcuberMediaServices:1935/stream-play/${SOURCE_ID}\n            - SOURCE_ID=${SOURCE_ID}\n            - FRAME_SKIP_RATE=5\n            - OUTPUT_AMQP=amqp://guest:guest@rabbitmq:5672/?exchange=excuber.processing.image&routing_key=%23.FaceDetection.%23\n        volumes:\n            - /var/excuber:/mnt/excuber",
      "rancher_compose": ".catalog:\n    name: \"LiveCamera\"\n    version: \"v1.0\"\n    description: \"RTMP live camera\"\n    uuid: \"LiveCamera\"\n    minumum_rancher_version: \"v1.0\"\n    questions:\n        - variable: SOURCE_ID\n          description: \"Source ID\"\n          label: \"Source ID\"\n          required: true\n          default: \"source-\"\n          type: \"string\"\n        - variable: stream_behaviour\n          label: Choose stream behaviour\n          description: |\n            Choose stream behaviour\n            * stream-play-record - Enable streaming, HLS streaming and recording to NAS\n            * stream-play - Enable streaming and HLS streaming\n            * stream - Enable streaming only\n            * stream-record - Enable streaming and recording to NAS\n          required: true\n          type: enum\n          default: stream-play\n          options:\n            - stream-play-record\n            - stream-play\n            - stream\n            - stream-record\n        - variable: \"mediaservices_link\"\n          description: |\n            stack/service link or external service link to Excuber Media Services\n          label: \"Excuber Media Services stack/service\"\n          default: \"ReleaseExcuberCommon/ExcuberMediaServices\"\n          required: true\n          type: \"service\""
    },
    {
      "name": "Process live RTSP (demo)",
      "source_types": "camera",
      "docker_compose": "version: '2'\nservices:\n    ExcuberRTSPLiveCamera:\n        container_name: ExcuberRTSPLiveCamera\n        image: registry.git.excuber.intranet:5005/excuber/excubermediartsptortmp:latest\n        labels:\n            io.rancher.container.hostname_override: container_name\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - ReleaseExcuberCommon/ExcuberMediaServices:ExcuberMediaServices\n        command:  gst-launch-1.0 rtspsrc location=${INPUT} ! rtph264depay ! flvmux streamable=true ! rtmpsink location=rtmp://ExcuberMediaServices:1935/stream-play/${SOURCE_ID}\n        stdin_open: true\n        tty: true\n    ExcuberVideoInput:\n        image: registry.git.excuber.intranet:5005/excuber/modulevideoinput:latest\n        privileged: true\n        tty: true\n        stdin_open: true\n        external_links:\n            - Couchbase/couchbase:couchbase\n            - RabbitMQ/rabbitmq:rabbitmq\n            - ReleaseExcuberCommon/ExcuberMediaServices:ExcuberMediaServices\n        entrypoint: /opt/excuber/run.sh\n        environment:\n            - INPUT=rtmp://ExcuberMediaServices:1935/stream-play/${SOURCE_ID}\n            - SOURCE_ID=${SOURCE_ID}\n            - FRAME_SKIP_RATE=5\n            - OUTPUT_AMQP=amqp://guest:guest@rabbitmq:5672/?exchange=excuber.processing.image&routing_key=%23.FaceDetection.%23\n        volumes:\n            - /var/excuber:/mnt/excuber",
      "rancher_compose": ".catalog:\n    name: \"LiveCamera\"\n    version: \"v1.0\"\n    description: \"RTMP live camera\"\n    uuid: \"LiveCamera\"\n    minumum_rancher_version: \"v1.0\"\n    questions:\n        - variable: SOURCE_ID\n          description: \"Source ID\"\n          label: \"Source ID\"\n          required: true\n          default: \"source-\"\n          type: \"string\"\n        - variable: INPUT\n          description: \"RTSP link to source stream\"\n          label: \"RTSP URL\"\n          required: true\n          default: \"\"\n          type: \"string\"\n        - variable: stream_behaviour\n          label: Choose stream behaviour\n          description: |\n            Choose stream behaviour\n            * stream-play-record - Enable streaming, HLS streaming and recording to NAS\n            * stream-play - Enable streaming and HLS streaming\n            * stream - Enable streaming only\n            * stream-record - Enable streaming and recording to NAS\n          required: true\n          type: enum\n          default: stream-play\n          options:\n            - stream-play-record\n            - stream-play\n            - stream\n            - stream-record\n        - variable: \"mediaservices_link\"\n          description: |\n            stack/service link or external service link to Excuber Media Services\n          label: \"Excuber Media Services stack/service\"\n          default: \"ReleaseExcuberCommon/ExcuberMediaServices\"\n          required: true\n          type: \"service\""
    }
  ]
}
